<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function tells RAP to extract the variables you want from the .dataset
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
download_project_data(). You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it."><title>Extract variables you want from the UKB database and create a CSV file to later upload to your own project. — create_csv_from_database • ukbAid</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract variables you want from the UKB database and create a CSV file to later upload to your own project. — create_csv_from_database"><meta property="og:description" content="This function tells RAP to extract the variables you want from the .dataset
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
download_project_data(). You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ukbAid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../../index.html" aria-label="Home">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/steno-aarhus/ukbAid/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract variables you want from the UKB database and create a CSV file to later upload to your own project.</h1>
      <small class="dont-index">Source: <a href="https://github.com/steno-aarhus/ukbAid/blob/HEAD/R/create-data.R" class="external-link"><code>R/create-data.R</code></a></small>
      <div class="d-none name"><code>create_csv_from_database.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function tells RAP to extract the variables you want from the <code>.dataset</code>
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
<code>download_project_data()</code>. You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_csv_from_database</span><span class="op">(</span></span>
<span>  <span class="va">variables_to_extract</span>,</span>
<span>  file_prefix <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  project_id <span class="op">=</span> <span class="fu"><a href="get_rap_project_id.html">get_rap_project_id</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dataset_record_id <span class="op">=</span> <span class="va">dare_project_record_id</span>,</span>
<span>  username <span class="op">=</span> <span class="fu"><a href="get_username.html">get_username</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>variables_to_extract</dt>
<dd><p>A character vector of variables you want to
extract from the UKB database (from the <code>.dataset</code> file). Use
<code>save_database_variables_to_project()</code> to create the
<code>data-raw/rap-variables.csv</code> file, open that file, and delete all variables you
don't want to keep. This is the file that contains the <code>variable_name</code> column
you would use for this argument.</p></dd>


<dt>file_prefix</dt>
<dd><p>The prefix to add to the start of the file name. Defaults to "data".</p></dd>


<dt>project_id</dt>
<dd><p>The project's abbreviation. Defaults to using
<code><a href="get_rap_project_id.html">get_rap_project_id()</a></code>, which is the name of the project folder.</p></dd>


<dt>dataset_record_id</dt>
<dd><p>The "record ID" of the database, found when clicking
the <code>.dataset</code> file in the RAP project folder. Defaults to the ID for the
Steno project <code>dare_project_record_id</code>.</p></dd>


<dt>username</dt>
<dd><p>The username to set where the dataset is saved to. Defaults to using
<code><a href="get_username.html">get_username()</a></code>, which is the name of the current user of the session.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Outputs whether the extraction and creation of the data was
successful or not. Used for the side effect of creating the CSV on the RAP
server. The newly created CSV will have your username in the filename.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"data-raw/rap-variables.csv"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">variable_name</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">create_csv_from_database</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># rap_variables %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   pull(field_id) %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   create_csv_from_database(project_id = "mesh", username = "lwjohnst")</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Luke Johnston.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

