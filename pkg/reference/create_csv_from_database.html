<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract variables you want from the UKB database and create a CSV file to later upload to your own project. — create_csv_from_database • ukbAid</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract variables you want from the UKB database and create a CSV file to later upload to your own project. — create_csv_from_database"><meta name="description" content="This function tells RAP to extract the variables you want from the .dataset
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
download_project_data(). You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it."><meta property="og:description" content="This function tells RAP to extract the variables you want from the .dataset
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
download_project_data(). You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ukbAid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../../index.html" aria-label="Home"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/steno-aarhus/ukbAid/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract variables you want from the UKB database and create a CSV file to later upload to your own project.</h1>
      <small class="dont-index">Source: <a href="https://github.com/steno-aarhus/ukbAid/blob/main/R/deprecated.R" class="external-link"><code>R/deprecated.R</code></a></small>
      <div class="d-none name"><code>create_csv_from_database.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function tells RAP to extract the variables you want from the <code>.dataset</code>
database file and to create a CSV file within the main RAP project folder.
When you want to use the CSV file in your own data analysis project, use
<code>download_project_data()</code>. You probably don't need to run this function often,
probably only once at the start of your project. NOTE: This function takes
5 minutes to run on the UKB RAP, so be careful with just randomly running it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_csv_from_database</span><span class="op">(</span></span>
<span>  <span class="va">variables_to_extract</span>,</span>
<span>  field <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"title"</span><span class="op">)</span>,</span>
<span>  file_prefix <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  project_id <span class="op">=</span> <span class="fu"><a href="proj_get_name.html">get_rap_project_id</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dataset_record_id <span class="op">=</span> <span class="va">dare_project_record_id</span>,</span>
<span>  username <span class="op">=</span> <span class="fu"><a href="rap_get_user.html">rap_get_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-variables-to-extract">variables_to_extract<a class="anchor" aria-label="anchor" href="#arg-variables-to-extract"></a></dt>
<dd><p>A character vector of variables you want to
extract from the UKB database (from the <code>.dataset</code> file). Use
<code>save_database_variables_to_project()</code> to create the
<code>data-raw/rap-variables.csv</code> file, open that file, and delete all variables you
don't want to keep. This is the file that contains the <code>variable_name</code> column
you would use for this argument.</p></dd>


<dt id="arg-file-prefix">file_prefix<a class="anchor" aria-label="anchor" href="#arg-file-prefix"></a></dt>
<dd><p>The prefix to add to the start of the file name. Defaults to "data".</p></dd>


<dt id="arg-project-id">project_id<a class="anchor" aria-label="anchor" href="#arg-project-id"></a></dt>
<dd><p>The project's abbreviation. Defaults to using
<code><a href="proj_get_name.html">get_rap_project_id()</a></code>, which is the name of the project folder.</p></dd>


<dt id="arg-dataset-record-id">dataset_record_id<a class="anchor" aria-label="anchor" href="#arg-dataset-record-id"></a></dt>
<dd><p>The "record ID" of the database, found when clicking
the <code>.dataset</code> file in the RAP project folder. Defaults to the ID for the
Steno project <code>dare_project_record_id</code>.</p></dd>


<dt id="arg-username">username<a class="anchor" aria-label="anchor" href="#arg-username"></a></dt>
<dd><p>The username to set where the dataset is saved to. Defaults to using
<code><a href="rap_get_user.html">rap_get_user()</a></code>, which is the name of the current user of the session.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Outputs whether the extraction and creation of the data was
successful or not. Used for the side effect of creating the CSV on the RAP
server. The newly created CSV will have your username in the filename.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rap_variables</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">create_csv_from_database</span><span class="op">(</span>project_id <span class="op">=</span> <span class="st">"mesh"</span>, username <span class="op">=</span> <span class="st">"lwjohnst"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luke Johnston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

